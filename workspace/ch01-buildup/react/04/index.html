<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo List App</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    // ê¸°ëŠ¥ì„ ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì— í¬í•¨ë˜ëŠ”ì§€ ê³ ë¯¼ í•„ìš”
    // ë…ë¦½ëœ ì»´í¬ë„ŒíŠ¸ëŠ” ê´€ë ¨ëœ UI ì™€ ê¸°ëŠ¥ì´ ëª¨ë‘ í¬í•¨ë˜ëŠ” ê²ƒì´ ì´ìƒì 

    function Header() {
      return (
        <header>
          <h1>Todo List - ê¸°ëŠ¥ ì¶”ê°€ :()</h1>
          <p>íŒŒì¼ ê²½ë¡œ: <span id="filepath">{`ch${document.URL.split('/ch')[1]}index.html`}</span></p>
        </header>
      );
    }

    function TodoInput({ addItem }) {
      // ğŸš¨ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì½”ë“œ ì¶”ê°€
      // React ì—ì„œëŠ” ì´ˆê¸° state ëŠ” ì•„ë¬´ ê²ƒë„ ì—†ë„ë¡ í•¨
      // setTitle ì€ title ì´ ë³€ê²½ë¨ì— ë”°ë¼ ë¦¬ë Œë”ë§ë¨
      // ì´ˆê¸° ìƒíƒœê°’ì€ ë¹ˆ ë¬¸ìì—´
      const [title, setTitle] = React.useState('');
      // ì´ˆê¸° ìƒíƒœê°’ì€ 4
      const [nextId, setNextId] = React.useState(4);

      // í•­ëª© ì¶”ê°€ ê´€ë ¨ ê¸°ëŠ¥ì€ TodoInput ì»´í¬ë„ŒíŠ¸ ë‚´ì— í¬í•¨ë˜ëŠ” ê²ƒì´ ì¢‹ìŒ
      const handleAdd = () => {
        // DOM API ë¥¼ ì‚¬ìš©í•´ì„œ input ë€ ë‚´ë¶€ì˜ ê°’ì„ ë°›ì•„ì™€ì•¼ í•¨
        // ğŸš¨ í•˜ì§€ë§Œ React ì—ì„œëŠ” DOM API ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœì— ë”°ë¼ ìƒíƒœê°€ ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¦¬ë Œë”ë§ì„ í•¨
        if (title.trim() !== '') {
          const item = { _id: nextId, title, done: false };
          addItem(item);
          // ì¶”ê°€ ë²„íŠ¼ì´ í´ë¦­ë  ë•Œë§ˆë‹¤ id ê°’ë„ í•˜ë‚˜ì”© ì¦ê°€í•˜ë„ë¡ ì„¤ì •
          setNextId(nextId + 1);
          setTitle('');
        }
      };

      const handleKeyUp = (event) => {
        if (event.key === 'Enter') handleAdd();
      };

      // event ê°ì²´ë¥¼ ë°›ì•„ì„œ ì´ë²¤íŠ¸ ì¸ìë¡œ ì „ë‹¬í•˜ëŠ” ê²½ìš°, event ë§¤ê°œë³€ìˆ˜ë¥¼ í¬í•¨í•œ í•¨ìˆ˜ ìì²´ë¥¼ ì „ë‹¬í•´ì•¼í•¨
      return (
        <div className="todoinput">
          <input type="text" autoFocus onKeyUp={handleKeyUp} value={title} onChange={event => setTitle(event.target.value)} />
          <button type="button" onClick={handleAdd}>ì¶”ê°€</button>
        </div>
      );
    }

    function TodoItem({ item }) {
      return (
        <li>
          <span>{item._id}</span>
          <span>{item.done ? <s>{item.title}</s> : item.title} </span>
          <button type="button">ì‚­ì œ</button>
        </li>
      );
    }

    function TodoList({ itemList }) {
      const list = itemList.map(item => <TodoItem key={item._id} item={item} />)
      return (
        <ul className="todolist">
          {list}
        </ul>
      );
    }

    function Todo(props) {
      return (
        <div id="main">
          <div id="container">
            <ul>
              <li>
                <h2>ì‡¼í•‘ ëª©ë¡</h2>
                <TodoInput addItem={props.addItem} />
                <TodoList itemList={props.itemList} />
              </li>
            </ul>
          </div>
        </div>

      );
    }

    function Footer() {
      return (
        <footer>
          <p>ë©‹ìŸì´ ì‚¬ìì²˜ëŸ¼ FrontEnd BootCamp</p>
        </footer>
      );
    }

    function App() {
      // ìƒ˜í”Œ ëª©ë¡
      // React ëŠ” ìƒíƒœë¥¼ ê´€ë¦¬, useState ë¡œ ë§Œë“¤ì–´ì§„ ê°’ì„ 'ë³€ê²½'í•˜ëŠ” ê²½ìš°ì—ë§Œ ë¦¬ë Œë”ë§ì´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë¨
      // itemList ëŠ” êº¼ë‚´ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ, setItemList ëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë©”ì„œë“œ
      const [itemList, setItemList] = React.useState([
        { _id: 1, title: 'ë‘ë¶€', done: true },
        { _id: 2, title: 'ê³„ë€', done: false },
        { _id: 3, title: 'ë¼ë©´', done: true },
      ]);

      // ê´€ë ¨ëœ ê¸°ëŠ¥ì„ ì»´í¬ë„ŒíŠ¸ì— í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ì¥ ì´ìƒì 
      // ì¡°ì‘í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ ì»´í¬ë„ŒíŠ¸ê°€ í¬í•¨í•˜ê³  ìˆì§€ ì•Šê³ , ìƒìœ„ ìš”ì†Œë¡œë¶€í„° ë°›ì•„ì™€ì„œ ì¡°ì‘í•˜ëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ 
      // ìƒíƒœë¥¼ ë§Œë“  ê³³ì—ì„œ ê´€ë¦¬ê¹Œì§€ í•˜ëŠ” ì½”ë“œê¹Œì§€ í¬í•¨í•´ì•¼ ìœ ì§€ë³´ìˆ˜ê°€ í¸ë¦¬í•¨
      // ë”°ë¼ì„œ itemList ë°°ì—´ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ê°€ addItem();

      const addItem = (item) => {
        const newItemList = [...itemList, item]; // ê°ì²´(ë˜ëŠ” ë°°ì—´)ì¼ ê²½ìš° ìƒˆë¡œìš´ ê°ì²´(ì£¼ì†Œê°€ ë³€ê²½ëœ)ë¡œ ë§Œë“¤ì–´ì•¼ í™”ë©´ì´ ê°±ì‹ ëœë‹¤
        setItemList(newItemList); // setter í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì•¼ í™”ë©´ ê°±ì‹ ì´ ë¨
      }

      return (
        <div id="todo">
          <Header />
          <Todo itemList={itemList} addItem={addItem} />
          <Footer />
        </div>
      );
    }

    // ReactDOM ì—ì„œ root ë¥¼ ID ë¡œ ê°–ëŠ” ìš”ì†Œë¥¼ ì„ íƒí•˜ê³ , í•´ë‹¹ ìš”ì†Œ í•˜ìœ„ì— App í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ render
    ReactDOM.createRoot(document.getElementById('root')).render(<App />)

  </script>
</body>

</html>